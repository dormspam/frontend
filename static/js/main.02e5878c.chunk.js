(this.webpackJsonpdormspam=this.webpackJsonpdormspam||[]).push([[0],{38:function(e,t,a){e.exports=a(96)},45:function(e,t,a){},73:function(e,t,a){},74:function(e,t,a){},75:function(e,t,a){},76:function(e,t,a){},77:function(e,t,a){},78:function(e,t,a){},79:function(e,t,a){},80:function(e,t,a){},81:function(e,t,a){},82:function(e,t,a){},83:function(e,t,a){},84:function(e,t,a){},85:function(e,t,a){},86:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},91:function(e,t,a){},94:function(e,t,a){},95:function(e,t,a){},96:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(24),c=a.n(s),i=a(25),l=(a(45),a(32)),o=a(3),u=a(4),h=a(6),d=a(5),m=a(7),v=a(33),p=a(104),g=a(105),f=a(106);function y(){return null!==("undefined"===typeof sessionStorage.user?null:JSON.parse(sessionStorage.user))}function b(e){sessionStorage.setItem("user",JSON.stringify(e))}var E=a(2),k=a(8),O=a.n(k),C=a(17),j=a.n(C),S=(a(73),"https://dormspam.herokuapp.com"),N=function(){function e(t){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};Object(o.a)(this,e);var r={method:"GET",url:S+t,withCredentials:!0};r.data=n.data,void 0!==n.method&&(r.method=n.method),r.params=n.params,j()(r).then((function(e){"undefined"!==typeof a.then&&a.then(e)})).catch((function(e){"undefined"!==typeof a.catch&&a.catch(e)}))}return Object(u.a)(e,[{key:"catch",value:function(e){return this.catch=e,this}},{key:"then",value:function(e){return this.then=e,this}}]),e}(),D=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"getCategories",value:function(){return new N("/categories")}}]),e}(),w=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"getEventFrequencyByDate",value:function(e){return new N("/events/frequency/"+e)}},{key:"getEventsByDate",value:function(e){return new N("/events/"+e)}},{key:"getEventsByQuery",value:function(e){return new N("/events?q="+e)}},{key:"getEventById",value:function(e){return new N("/events/"+e)}},{key:"getAllEvents",value:function(){return new N("/events/all")}}]),e}(),M=(a(74),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).getDayTags=a.getDayTags.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getDayTags",value:function(){var e=this.props.frequencies,t={};for(var a in e)this.props.categories.indexOf(a)>-1&&(t[a]=e[a]);var n=Object.keys(t).sort((function(t,a){return e[a]-e[t]})),s=[];if(this.props.focus)for(var c=0;c<3;c++)n.length>c&&e[n[c]]>0&&s.push(r.a.createElement("span",{className:"tags",style:{color:this.props.colors[n[c]]},key:"tag-"+n[c]},"\u25a0"));return s}},{key:"render",value:function(){var e=this.getDayTags();return r.a.createElement("div",{className:"HomeSidebarCalendarDayItem"+(this.props.active?" active":"")+(this.props.focus?" focus":"")+(this.props.isToday?" today":""),moment:this.props.moment,onClick:this.props.onClick},r.a.createElement("div",{className:"circle"},r.a.createElement("p",{className:"day"},this.props.day,r.a.createElement("br",null),e)))}}]),t}(n.Component)),L=(a(75),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={today:O()(),m:O()(),frequencies:{},colors:{}},a.previousMonth=a.previousMonth.bind(Object(E.a)(a)),a.nextMonth=a.nextMonth.bind(Object(E.a)(a)),a.selectDay=a.selectDay.bind(Object(E.a)(a)),D.getCategories().then((function(e){for(var t={},n=0;n<e.data.length;n++)t[e.data[n].name]=e.data[n].color;a.setState({colors:t})})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this;this.setState({today:O()(e.selectedDay),m:O()(e.selectedDay)}),w.getEventFrequencyByDate(O()(e.selectedDay).format("YYYY-MM-DD")).then((function(e){t.setState({frequencies:e.data})}))}},{key:"previousMonth",value:function(){var e=this;this.setState({m:this.state.m.subtract(1,"months")}),w.getEventFrequencyByDate(O()(this.state.m).format("YYYY-MM-DD")).then((function(t){e.setState({frequencies:t.data})}))}},{key:"nextMonth",value:function(){var e=this;this.setState({m:this.state.m.add(1,"months")}),w.getEventFrequencyByDate(O()(this.state.m).format("YYYY-MM-DD")).then((function(t){e.setState({frequencies:t.data})}))}},{key:"selectDay",value:function(e){for(var t=e.target;null===t.getAttribute("moment");)t=t.parentElement;var a=t.getAttribute("moment");this.setState({today:O()(a),m:O()(a)}),this.props.onSelectDay(O()(a))}},{key:"render",value:function(){var e=this,t=[],a=O()(this.state.m).startOf("month"),n=O()(a);n=n.endOf("month");for(var s=a.startOf("week"),c=n.endOf("week"),i=s;i.isBefore(c);i.add(1,"days"))t.push({moment:i.format(),date:i.date(),active:i.isSame(this.state.today,"day"),focus:i.isSame(this.state.m,"month"),isToday:i.format("MMM Do YY")===O()().format("MMM Do YY"),frequencies:i.format("YYYY-MM-DD")in this.state.frequencies?this.state.frequencies[i.format("YYYY-MM-DD")]:{Boba:0,Food:0,Tech:0,"EECS-jobs-announce":0,Recruiting:0,Social:0,"Performance Groups":0,Talks:0,Other:0}});var l=t.map((function(t,a){return r.a.createElement(M,{key:a,moment:t.moment,day:t.date,active:t.active,focus:t.focus,isToday:t.isToday,onClick:e.selectDay,frequencies:t.frequencies,colors:e.state.colors,categories:e.props.categories})}));return r.a.createElement("div",{className:"HomeSidebarCalendar"},r.a.createElement("div",{className:"header"},r.a.createElement("div",{className:"left-button",onClick:this.previousMonth}),r.a.createElement("h2",null,this.state.m.format("MMMM YYYY")),r.a.createElement("div",{className:"right-button",onClick:this.nextMonth})),r.a.createElement("div",{className:"calendar"},l))}}]),t}(n.Component)),U=(a(76),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={categories:[],filters:e.user.settings.filters},j.a.get("https://dormspam.herokuapp.com/categories").then((function(e){for(var t=[],n=0;n<e.data.length;n++)t.push(e.data[n].name);a.setState({categories:e.data,filters:t}),a.props.onCategoryUpdate(t)})),a.handleCategoryClick=a.handleCategoryClick.bind(Object(E.a)(a)),a.handleCheck=a.handleCheck.bind(Object(E.a)(a)),a.toggleCategory=a.toggleCategory.bind(Object(E.a)(a)),a.handleSave=a.handleSave.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleCategoryClick",value:function(e){if("input"!==e.target.tagName.toLowerCase()){var t=null;e.target.classList.contains("category")?t=e.target:e.target.parentElement.parentElement.classList.contains("category")&&(t=e.target.parentElement.parentElement);var a=this.state.categories[t.getAttribute("index")].name;this.toggleCategory(a)}}},{key:"handleCheck",value:function(e){var t=this.state.categories[e.target.parentElement.getAttribute("index")].name;this.toggleCategory(t)}},{key:"toggleCategory",value:function(e){var t=this.state.filters;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({filters:t}),this.props.onCategoryUpdate(t),this.handleSave()}},{key:"handleSave",value:function(){var e=this;j.a.put("https://dormspam.herokuapp.com/users/current",{filters:this.state.filters},{withCredentials:!0}).then((function(t){e.props.onUserUpdate(t.data)}))}},{key:"render",value:function(){var e=this,t=this.state.categories.map((function(t,a){return r.a.createElement("div",{className:"category",key:a,index:a,onClick:e.handleCategoryClick,style:e.state.filters.includes(t.name)?{color:t.color,borderLeft:"3px solid "+t.color}:{color:"#CFCFCF",borderLeft:"3px solid #CFCFCF"}},r.a.createElement("input",{type:"checkbox",checked:e.state.filters.includes(t.name),onChange:e.handleCheck}),r.a.createElement("div",{className:"text"},r.a.createElement("h3",null,t.name)))}));return r.a.createElement("div",{className:"HomeSidebarCategoriesView"},t)}}]),t}(n.Component)),x=a(98),A=(a(77),function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomeHeaderView"},r.a.createElement("img",{src:"/img/bars-solid.svg",alt:"Menu",className:"hamburger",onClick:this.props.onHamburgerClick}),r.a.createElement("img",{className:"logo",src:"/img/dormspam.svg",alt:"Logo"}),r.a.createElement(x.a,{to:"/settings"},r.a.createElement("img",{src:"/img/settings.svg",alt:"Settings"})))}}]),t}(n.Component)),I=(a(78),a(79),a(80),function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomeSelectionWeekBarDayItem"+(this.props.data.isToday?" today":"")+(this.props.data.active?" active":""),index:this.props.data.index,onClick:this.props.onClick},r.a.createElement("p",{className:"weekday"},this.props.data.day),r.a.createElement("div",{className:"circle"},r.a.createElement("p",{className:"day"},this.props.data.date)))}}]),t}(n.Component)),Y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={currentWeekStart:O()().startOf("week"),currentDate:O()()},a.previousWeek=a.previousWeek.bind(Object(E.a)(a)),a.nextWeek=a.nextWeek.bind(Object(E.a)(a)),a.selectDay=a.selectDay.bind(Object(E.a)(a)),a.selectToday=a.selectToday.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({currentDate:O()(e.selectedDay),currentWeekStart:O()(e.selectedDay).startOf("week")})}},{key:"previousWeek",value:function(){this.setState({currentWeekStart:O()(this.state.currentWeekStart).subtract(1,"weeks")})}},{key:"nextWeek",value:function(){this.setState({currentWeekStart:O()(this.state.currentWeekStart).add(1,"weeks")})}},{key:"selectDay",value:function(e){var t=e.target;null===t.getAttribute("index")&&(t=t.parentElement),null===t.getAttribute("index")&&(t=t.parentElement);var a=t.getAttribute("index"),n=O()(this.state.currentWeekStart);n=n.add(a,"days"),this.setState({currentDate:n}),this.props.onSelectDay(O()(n))}},{key:"selectToday",value:function(){var e=O()();this.setState({currentDate:O()(e)}),this.props.onSelectDay(O()(e))}},{key:"render",value:function(){for(var e=this,t=[],a=0;a<7;a++)t.push({index:a,day:O()(this.state.currentWeekStart).add(a,"days").format("ddd").toUpperCase(),date:O()(this.state.currentWeekStart).add(a,"days").date(),active:O()(this.state.currentWeekStart).add(a,"days").format("MMM Do YY")===O()(this.state.currentDate).format("MMM Do YY"),isToday:O()(this.state.currentWeekStart).add(a,"days").format("MMM Do YY")===O()().format("MMM Do YY")});var n=t.map((function(t){return r.a.createElement(I,{onClick:e.selectDay,key:t.date,data:t,categories:e.props.categories})}));return r.a.createElement("div",{className:"HomeSelectionWeekBar"},r.a.createElement("div",{className:"header"},r.a.createElement("h1",null,r.a.createElement("span",{className:"bold"},this.state.currentDate.format("dddd")),", ",this.state.currentDate.format("MMMM Do")),r.a.createElement("h1",{className:"outline",onClick:this.selectToday},"Today")),r.a.createElement("div",{className:"weekbar"},r.a.createElement("div",{className:"left-button",onClick:this.previousWeek}),r.a.createElement("div",{className:"weekdays"},n),r.a.createElement("div",{className:"right-button",onClick:this.nextWeek})))}}]),t}(n.Component),B=(a(81),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={openContent:"Close",closedContent:"Select Categories",isOpen:!1},a.handleCategorySelect=a.handleCategorySelect.bind(Object(E.a)(a)),a.switchFilter=a.switchFilter.bind(Object(E.a)(a)),a.handleChange=a.handleChange.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleCategorySelect",value:function(e){if("input"!==e.target.tagName.toLowerCase()){var t=e.target.childNodes[0];t.checked=!t.checked}}},{key:"switchFilter",value:function(e){this.setState({isOpen:!this.state.isOpen})}},{key:"handleChange",value:function(e){this.props.onSearch(e.target.value)}},{key:"render",value:function(){return r.a.createElement("div",{className:"HomeSelectionFilter"},r.a.createElement("div",{className:"icon"},r.a.createElement("img",{src:"/img/search.svg",alt:"Search"})),r.a.createElement("input",{className:"search",type:"text",name:"search",placeholder:"Search by content...",onChange:this.handleChange}),r.a.createElement("br",null))}}]),t}(n.Component)),T=function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"HomeSelectionView"},r.a.createElement(Y,{selectedDay:this.props.selectedDay,onSelectDay:this.props.onSelectDay}),r.a.createElement(B,{onSearch:this.props.onSearch}))}}]),t}(n.Component),F=(a(82),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={colors:{}},a.getCategories=a.getCategories.bind(Object(E.a)(a)),D.getCategories().then((function(e){for(var t=0;t<e.data.length;t++)a.state.colors[e.data[t].name]=e.data[t].color})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getCategories",value:function(){for(var e=this.props.event.categories,t=[],a=0;a<e.length;a++)t.push(r.a.createElement("span",{className:"tags",key:"tags-"+e[a],style:{border:"2px solid "+this.state.colors[e[a]],color:this.state.colors[e[a]]}},"\u25cf ",e[a]));return t}},{key:"render",value:function(){if(null===this.props.event)return r.a.createElement("div",null);var e=this.getCategories();return r.a.createElement("div",{className:"HomeSidebarEventModal"},r.a.createElement("div",{className:"metadata"},r.a.createElement("img",{className:"back",src:"/img/grey-back.svg",alt:"Back",onClick:this.props.onSelectBack}),r.a.createElement("h3",null,this.props.event.sent_from),r.a.createElement("div",{className:"minipadding"}),r.a.createElement("h3",null,e),r.a.createElement("div",{className:"padding"}),r.a.createElement("hr",null)),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.event.description}}))}}]),t}(n.Component)),q=(a(83),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).handleClick=a.handleClick.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleClick",value:function(){this.props.onClick(this.props.event)}},{key:"render",value:function(){for(var e=[],t=0;t<this.props.event.categories.length;t++)e.push(r.a.createElement("span",{className:"dots",style:{color:this.props.colors[this.props.event.categories[t]]},key:"dots-"+this.props.event.categories[t]},"\u25a0"));return r.a.createElement("div",{className:"HomeFeedEventView"+(this.props.selected?" selected":""),style:this.props.selected?{background:this.props.color}:{},onClick:this.handleClick},r.a.createElement("h3",{className:"bold"},this.props.event.name),r.a.createElement("p",null,this.props.event.location," ",e),r.a.createElement("p",{className:"description"+(this.props.selected?" selected":"")},r.a.createElement("br",null),this.props.event.description_text))}}]),t}(n.Component)),H=(a(84),function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={data:[],searchCount:0,searching:!1,colors:{}},a.saveEventData=a.saveEventData.bind(Object(E.a)(a)),a.parseCategories=a.parseCategories.bind(Object(E.a)(a));var n=Object(E.a)(a);return w.getEventsByDate(O()().format("YYYY-MM-DD")).then((function(e){n.saveEventData(e.data)})),D.getCategories().then((function(e){for(var t={},n=0;n<e.data.length;n++)t[e.data[n].name]=e.data[n].color;a.setState({colors:t})})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=this,a=e.search.length>0,n=this.state.searchCount+1;a?w.getEventsByQuery(e.search).then((function(e){n<t.state.searchCount||t.saveEventData(e.data)})):w.getEventsByDate(e.selectedDay.format("YYYY-MM-DD")).then((function(e){n<t.state.searchCount||t.saveEventData(e.data)})),this.setState({searchCount:n,searching:a})}},{key:"saveEventData",value:function(e){console.log(e);for(var t=[],a=e.sort((function(e,t){var a=O()(e.start_time).valueOf(),n=O()(t.start_time).valueOf();return a>n?1:a<n?-1:0})),n=0;n<a.length;n++)0===t.length?t.push([a[n]]):O()(t[t.length-1][0].start_time).valueOf()===O()(a[n].start_time).valueOf()?t[t.length-1].push(a[n]):t.push([a[n]]);for(var r=0;r<a.length;r++)a[r].categories=this.parseCategories(a[r].categories);for(var s=[],c=0;c<t.length;c++)for(var i=0;i<t[c][0].categories.length;i++)if(this.props.categories.indexOf(t[c][0].categories[i])>=0){s.push(t[c]);break}this.setState({data:s})}},{key:"parseCategories",value:function(e){for(var t=(e=e.substring(1,e.length-1)).split(","),a=0;a<t.length;a++)t[a]=t[a].replace(/"/g,"");return t}},{key:"render",value:function(){for(var e=[],t=0;t<this.state.data.length;t++){e.push(r.a.createElement("div",{className:"timeline",key:"times"+t+"1"},r.a.createElement("div",{className:"sideline"},r.a.createElement("div",{className:"ball"}))));var a=O()(this.state.data[t][0].start_time).format("h:mm a");this.state.searching&&(a=O()(this.state.data[t][0].start_time).format("MMMM Do YYYY, h:mm a")),e.push(r.a.createElement("div",{className:"onetime",key:"times"+t+"2"},a));for(var n=0;n<this.state.data[t].length;n++){var s=!1;null!==this.props.selectedEvent&&(s=this.props.selectedEvent.uid===this.state.data[t][n].uid),e.push(r.a.createElement("div",{className:"timeevents",key:this.state.data[t][n].uid},r.a.createElement("div",{className:"sidespace"}),r.a.createElement(q,{event:this.state.data[t][n],selected:s,onClick:this.props.onSelectEvent,colors:this.state.colors})))}}return console.log(e),0===e.length&&(e=r.a.createElement("div",{className:"empty-events"},r.a.createElement("img",{className:"empty-events-icon",src:"img/empty.png"}),r.a.createElement("h1",{className:"empty-events-label"},"No events found!"))),r.a.createElement("div",{className:"HomeFeedView"},e)}}]),t}(n.Component)),P=(a(85),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={colors:{}},a.getCategories=a.getCategories.bind(Object(E.a)(a)),D.getCategories().then((function(e){for(var t=0;t<e.data.length;t++)a.state.colors[e.data[t].name]=e.data[t].color})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getCategories",value:function(){for(var e=this.props.event.categories,t=[],a=0;a<e.length;a++)t.push(r.a.createElement("span",{className:"tags",key:"tags-"+e[a],style:{border:"2px solid "+this.state.colors[e[a]],color:this.state.colors[e[a]]}},"\u25cf ",e[a]));return t}},{key:"render",value:function(){if(null===this.props.event)return null;var e=this.getCategories();return r.a.createElement("div",{id:this.props.event.uid,className:"HomeFeedEventModal"},r.a.createElement("img",{className:"back",src:"/img/x-button.svg",alt:"Back",onClick:this.props.onSelectBack}),r.a.createElement("h3",null,this.props.event.sent_from),r.a.createElement("div",{className:"minipadding"}),r.a.createElement("h3",null,e),r.a.createElement("div",{className:"padding"}),r.a.createElement("hr",null),r.a.createElement("h2",null,this.props.event.title),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.props.event.description}}))}}]),t}(n.Component)),W=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={day:O()(),event:null,search:"",user:{settings:{filters:[]}},categories:[],mobileMenu:!1},j.a.get("https://dormspam.herokuapp.com/users/current",{withCredentials:!0}).then((function(e){a.setState({user:e.data})})),a.handleSelectEvent=a.handleSelectEvent.bind(Object(E.a)(a)),a.handleSelectDay=a.handleSelectDay.bind(Object(E.a)(a)),a.handleClickAway=a.handleClickAway.bind(Object(E.a)(a)),a.handleSearch=a.handleSearch.bind(Object(E.a)(a)),a.handleUserUpdate=a.handleUserUpdate.bind(Object(E.a)(a)),a.handleCategoryUpdate=a.handleCategoryUpdate.bind(Object(E.a)(a)),a.toggleMobileMenu=a.toggleMobileMenu.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleSelectEvent",value:function(e){null!==this.state.event&&this.state.event.uid===e.uid?(document.getElementsByClassName("column left")[0].removeEventListener("click",this.handleClickAway,!1),this.setState({event:null})):(document.getElementsByClassName("column left")[0].addEventListener("click",this.handleClickAway,!1),this.setState({event:e}))}},{key:"handleSelectDay",value:function(e){this.setState({day:e,event:null})}},{key:"handleClickAway",value:function(e){document.getElementsByClassName("column left")[0].removeEventListener("click",this.handleClickAway,!1),this.setState({event:null})}},{key:"handleSearch",value:function(e){this.setState({search:e})}},{key:"handleUserUpdate",value:function(e){this.setState({user:e})}},{key:"handleCategoryUpdate",value:function(e){this.setState({categories:e})}},{key:"toggleMobileMenu",value:function(){this.setState({mobileMenu:!this.state.mobileMenu})}},{key:"render",value:function(){return r.a.createElement("div",{className:"HomeView"},r.a.createElement("a",{href:"https://docs.google.com/forms/d/e/1FAIpQLScdLEjdkiVAdQ2gKoA1QtD9ANvBuOrce4ZIJwbIVQz7TRkObg/viewform",target:"_blank"},r.a.createElement("div",{className:"betaform"}," beta - report bugs / suggest changes ",r.a.createElement("a",{style:{textDecoration:"underline"}},"here"))),r.a.createElement("div",{className:"column left"+(null!==this.state.event?" inactive":"")},r.a.createElement("div",{className:"betaspace"}),r.a.createElement("div",{className:"greybox"+(this.state.mobileMenu?" active":""),onClick:this.toggleMobileMenu}),r.a.createElement(A,{onHamburgerClick:this.toggleMobileMenu}),r.a.createElement(T,{onSearch:this.handleSearch,selectedDay:this.state.day,onSelectDay:this.handleSelectDay,categories:this.state.categories}),r.a.createElement(H,{search:this.state.search,selectedDay:this.state.day,selectedEvent:this.state.event,onSelectEvent:this.handleSelectEvent,categories:this.state.categories})),r.a.createElement("div",{className:"modal"},r.a.createElement(P,{event:this.state.event,onSelectBack:this.handleClickAway})),r.a.createElement("div",{className:"column right"+(this.state.mobileMenu?" mobile":"")+(null!==this.state.event?" active":"")},r.a.createElement("div",{className:"betaspace"}),r.a.createElement(L,{selectedDay:this.state.day,onSelectDay:this.handleSelectDay,categories:this.state.categories}),r.a.createElement(U,{onUserUpdate:this.handleUserUpdate,user:this.state.user,onCategoryUpdate:this.handleCategoryUpdate}),r.a.createElement(F,{onSelectBack:this.handleClickAway,event:this.state.event})))}}]),t}(n.Component),R=function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={event:null};var n=Object(E.a)(a);return w.getEventById(e.match.params.id).then((function(e){n.setState({event:e.data})})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return null===this.state.event?r.a.createElement("div",null):r.a.createElement(F,{event:this.state.event})}}]),t}(n.Component),_=a(103),K=function(){function e(){Object(o.a)(this,e)}return Object(u.a)(e,null,[{key:"getCurrentUser",value:function(){return new N("/users/current")}},{key:"login",value:function(e){return new N("/users/login",{data:{kerberos:e},method:"post"})}},{key:"logout",value:function(){return sessionStorage.clear(),new N("/users/current",{method:"delete"})}},{key:"updateCurrentUser",value:function(e){return new N("/users/current",{data:e,method:"put"})}},{key:"verify",value:function(e,t){return new N("/users/verify",{data:{code:e,kerberos:t},method:"post"})}}]),e}(),V=(a(86),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={redirect:null,pending:!1},a.kerberosInput=r.a.createRef(),a.handleKeyDown=a.handleKeyDown.bind(Object(E.a)(a)),a.handleLogin=a.handleLogin.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleKeyDown",value:function(e){13===e.keyCode&&this.handleLogin()}},{key:"handleLogin",value:function(){if(0!==this.kerberosInput.current.value.length&&!this.state.pending){var e=this.kerberosInput.current.value,t=this;K.login(e).then((function(a){t.setState({redirect:"/verify?k="+e})})),document.getElementById("login-btn").style.backgroundColor="#888BDE",document.getElementById("login-btn").innerHTML="Sending email to "+e+"@mit.edu",document.getElementById("login-btn").style.cursor="text",this.setState({pending:!0}),b("lol"),this.setState({redirect:"/"})}}},{key:"render",value:function(){return null!==this.state.redirect?r.a.createElement(_.a,{to:this.state.redirect}):r.a.createElement("div",{className:"LoginView"},r.a.createElement("div",{className:"bigger-container"},r.a.createElement("img",{className:"logo",src:"/img/dormspam-white.svg",alt:"Logo"}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Sign In"),r.a.createElement("input",{ref:this.kerberosInput,onKeyDown:this.handleKeyDown,type:"text",placeholder:"Enter your kerberos"}),r.a.createElement("button",{id:"login-btn",onClick:this.handleLogin},"Login"))))}}]),t}(n.Component)),J=(a(88),a(89),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={frequency:a.props.user.settings.frequency},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleSave=a.handleSave.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleChange",value:function(e){this.setState({frequency:parseInt(e.target.value,10)})}},{key:"handleSave",value:function(){var e=this;K.updateCurrentUser({frequency:parseInt(this.state.frequency,10)}).then((function(t){e.props.onUserUpdate(t.data)}))}},{key:"render",value:function(){var e=[0,1,2,3,5,7].map((function(e){return r.a.createElement("option",{key:e},e)}));return r.a.createElement("div",{className:"FrequencyView"+(this.props.hidden?" hidden":"")},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"How often would you like your digest?"),r.a.createElement("div",{className:"line"},r.a.createElement("p",null,"Once every"),r.a.createElement("label",{className:"custom-select"},r.a.createElement("select",{defaultValue:this.state.frequency,onChange:this.handleChange},e)),r.a.createElement("p",null,1===this.state.frequency?"day":"days"),r.a.createElement("button",{className:"btn-freq",onClick:this.handleSave},"Save"))))}}]),t}(n.Component)),Q=(a(90),function(e){function t(e){var a;Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={categories:[],preferences:e.user.settings.preferences,colors:{}},a.saveCategories=a.saveCategories.bind(Object(E.a)(a)),a.handleCategoryClick=a.handleCategoryClick.bind(Object(E.a)(a)),a.handleCheck=a.handleCheck.bind(Object(E.a)(a)),a.handleSave=a.handleSave.bind(Object(E.a)(a));var n=Object(E.a)(a);return j.a.get("https://dormspam.herokuapp.com/categories").then((function(e){n.saveCategories(e.data)})),D.getCategories().then((function(e){for(var t={},n=0;n<e.data.length;n++)t[e.data[n].name]=e.data[n].color;a.setState({colors:t})})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"saveCategories",value:function(e){this.setState({categories:e})}},{key:"handleCategoryClick",value:function(e){if("input"!==e.target.tagName.toLowerCase()){var t=null;e.target.classList.contains("category")?t=e.target:e.target.parentElement.parentElement.classList.contains("category")&&(t=e.target.parentElement.parentElement);var a=this.state.categories[t.getAttribute("index")].id;this.toggleCategory(a)}}},{key:"handleCheck",value:function(e){var t=this.state.categories[e.target.parentElement.getAttribute("index")].id;this.toggleCategory(t)}},{key:"toggleCategory",value:function(e){var t=this.state.preferences;t.includes(e)?t.splice(t.indexOf(e),1):t.push(e),this.setState({preferences:t})}},{key:"handleSave",value:function(){var e=this;K.updateCurrentUser({preferences:this.state.preferences}).then((function(t){e.props.onUserUpdate(t.data)}))}},{key:"render",value:function(){var e=this,t=this.state.categories.map((function(t,a){return r.a.createElement("div",{className:"category",key:a,index:a,onClick:e.handleCategoryClick,style:{borderLeft:"3px solid "+e.state.colors[t.name]}},r.a.createElement("input",{type:"checkbox",checked:e.state.preferences.includes(t.id),onChange:e.handleCheck}),r.a.createElement("div",{className:"text"},r.a.createElement("h3",null,t.name),r.a.createElement("p",null,t.description)))}));return r.a.createElement("div",{className:"PreferencesView"+(this.props.hidden?" hidden":"")},r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Select your digest preferences"),t,r.a.createElement("button",{className:"btn-pref",onClick:this.handleSave},"Save")))}}]),t}(n.Component)),G=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={currentItem:"Preferences",loading:!0,redirect:null},K.getCurrentUser().then((function(e){a.setState({loading:!1,user:e.data})})),a.handleItemClick=a.handleItemClick.bind(Object(E.a)(a)),a.handleUserUpdate=a.handleUserUpdate.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"handleItemClick",value:function(e){var t=this;"Log Out"===e.target.getAttribute("item")&&K.logout().then((function(e){t.setState({redirect:"/"})})),this.setState({currentItem:e.target.getAttribute("item")})}},{key:"handleUserUpdate",value:function(e){this.setState({user:e})}},{key:"render",value:function(){var e=this;if(null!==this.state.redirect)return r.a.createElement(_.a,{to:this.state.redirect});if(!0===this.state.loading)return r.a.createElement("div",null);var t=["Preferences","Frequency","Log Out"].map((function(t){return r.a.createElement("li",{className:t===e.state.currentItem?"active":"",key:t,item:t,onClick:e.handleItemClick},t)}));return r.a.createElement("div",{className:"SettingsView"},r.a.createElement("div",{className:"right column"},r.a.createElement(J,{hidden:"Frequency"!==this.state.currentItem,onUserUpdate:this.handleUserUpdate,user:this.state.user}),r.a.createElement(Q,{hidden:"Preferences"!==this.state.currentItem,onUserUpdate:this.handleUserUpdate,user:this.state.user})),r.a.createElement("div",{className:"left column"},r.a.createElement("div",{className:"headertop"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/img/back.svg",alt:"Settings"}),r.a.createElement("br",null),r.a.createElement("img",{className:"logo",src:"/img/dormspam.svg",alt:"Logo"}))),r.a.createElement("ul",null,t)))}}]),t}(n.Component),z=(a(91),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={code:"",deleteOnUp:!1,keyPressed:0,redirect:null,showErrorText:!1},a.handleChange=a.handleChange.bind(Object(E.a)(a)),a.handleKeyDown=a.handleKeyDown.bind(Object(E.a)(a)),a.handleKeyUp=a.handleKeyUp.bind(Object(E.a)(a)),a.handleLogin=a.handleLogin.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"keyCodeIsNumber",value:function(e){return e>=48&&e<=57||e>=96&&e<=105}},{key:"handleChange",value:function(e){var t=document.getElementsByTagName("input");if(8===this.state.keyPressed){var a=this.state.code.substring(0,this.state.code.length-1);this.setState({code:a}),t[a.length].focus()}else if(this.keyCodeIsNumber(this.state.keyPressed)){if(4===this.state.code.length)return;var n=this.state.code+(this.state.keyPressed-48).toString();this.setState({code:n}),t[Math.min(n.length,3)].focus()}}},{key:"handleKeyDown",value:function(e){13!==e.keyCode?this.setState({deleteOnUp:8===e.keyCode&&0===e.target.value.length,keyPressed:e.keyCode}):this.handleLogin()}},{key:"handleKeyUp",value:function(e){this.state.deleteOnUp&&this.handleChange(e)}},{key:"handleLogin",value:function(){var e=window.location.href;if(e.includes("?")){for(var t=e.split("?")[1].split("&"),a={},n=0;n<t.length;n++){var r=t[n];r.includes("=")&&(a[r.split("=")[0]]=r.split("=")[1])}var s=a.k,c=this;K.verify(this.state.code,s).then((function(e){b(e.data),c.setState({redirect:"/"})})).catch((function(e){c.setState({showErrorText:!0})}))}else this.setState({redirect:"/login"})}},{key:"render",value:function(){var e=this;if(null!==this.state.redirect)return r.a.createElement(_.a,{to:this.state.redirect});var t=[0,1,2,3].map((function(t){return r.a.createElement("input",{type:"number",key:t,index:t,placeholder:"0",value:e.state.code.charAt(t),onChange:e.handleChange,onKeyUp:e.handleKeyUp,onKeyDown:e.handleKeyDown,className:"number-input"})})),a=this.state.showErrorText?r.a.createElement("p",null,"Hmm... that code doesn't look right to us. Please try entering it again."):r.a.createElement("p",null,"Please check your MIT email address for a 4-digit verification code (this might take a minute)");return r.a.createElement("div",{className:"VerifyView"},r.a.createElement("div",{className:"bigger-container"},r.a.createElement("img",{className:"logo",src:"/img/dormspam-white.svg",alt:"Logo"}),r.a.createElement("div",{className:"container"},r.a.createElement("h1",null,"Verify Email"),a,r.a.createElement("div",{className:"code-input"},t),r.a.createElement("button",{onClick:this.handleLogin},"Login"))))}}]),t}(n.Component)),Z=(a(97),a(92),a(34)),$=a(36),X=a.n($),ee=(a(94),{resizable:!0,sortable:!0}),te=[{name:"ID",key:"uid",width:120},{name:"Name",key:"name",formatter:function(e){var t=e.value,a=e.row;return r.a.createElement("a",{className:"events-link",href:"/event/".concat(a.uid)},t)}},{name:"Start Date",key:"start_time",width:220,formatter:function(e){var t=e.value;return r.a.createElement("a",null,new Date(t).toLocaleDateString()," @ ",new Date(t).toLocaleTimeString())}},{name:"Published",key:"published",formatter:function(e){var t=e.value;return r.a.createElement("a",null,t?"PUBLISHED":"")},width:100},{name:"Approved",key:"approved",formatter:function(e){var t=e.value;return r.a.createElement("a",null,t?"APPROVED":"")},width:100}].map((function(e){return Object(Z.a)({},ee,{},e)})),ae=function(e){function t(e){var a;return Object(o.a)(this,t),a=Object(h.a)(this,Object(d.a)(t).call(this,e)),console.log(e),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"EventsTable"},r.a.createElement(X.a,{columns:te,rowGetter:function(t){return e.props.data[t]},rowsCount:this.props.data.length,minHeight:800}))}}]),t}(n.Component),ne=(a(95),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={loading:!0,allEvents:null,currentItem:"Events"},a.handleItemClick=a.handleItemClick.bind(Object(E.a)(a)),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;w.getAllEvents().then((function(t){console.log(t.data),e.setState({loading:!1,allEvents:t.data})})).catch((function(e){console.log(e)}))}},{key:"handleItemClick",value:function(e){var t=this;"Log Out"===e.target.getAttribute("item")&&K.logout().then((function(e){t.setState({redirect:"/"})})),this.setState({currentItem:e.target.getAttribute("item")})}},{key:"render",value:function(){var e=this,t=["Events","Log Out"].map((function(t){return r.a.createElement("li",{className:t===e.state.currentItem?"active":"",key:t,item:t,onClick:e.handleItemClick},t)}));return r.a.createElement("div",{className:"AdminView"},r.a.createElement("div",{className:"right column"},this.state.loading?r.a.createElement("a",null,"Loading Data"):r.a.createElement(ae,{data:this.state.allEvents})),r.a.createElement("div",{className:"left column"},r.a.createElement("div",{className:"headertop"},r.a.createElement("a",{href:"/"},r.a.createElement("img",{src:"/img/back.svg",alt:"Admin Settings"}),r.a.createElement("br",null),r.a.createElement("img",{className:"logo",src:"/img/dormspam.svg",alt:"Logo"}))),r.a.createElement("ul",null,t)))}}]),t}(n.Component)),re=a(99),se=a(100),ce=a(101),ie=a(102),le=a(107),oe={ALL:0,OTHER:2,FOOD:4,CAREER:8,FUNDRAISING:16,APPLICATION:32,PERFORMANCE:64,BOBA:128,TALKS:256,EECS:512},ue=[{type:oe.ALL,name:"All Events",color:null},{type:oe.OTHER,name:"Nontyped",color:null},{type:oe.FOOD,name:"Food",color:"green"},{type:oe.CAREER,name:"Career",color:"orange"},{type:oe.FUNDRAISING,name:"Fundraising",color:"lightblue"},{type:oe.APPLICATION,name:"Application Deadlines",color:"gold"},{type:oe.PERFORMANCE,name:"Performance",color:"pink"},{type:oe.BOBA,name:"Boba",color:"black"},{type:oe.TALKS,name:"Talks",color:"maroon"},{type:oe.EECS,name:"EECS-Jobs-Announce",color:"brown"}],he=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(h.a)(this,Object(d.a)(t).call(this,e))).state={event:null},w.getEventById(e.match.params.id).then((function(e){a.setState({event:e.data})})),a}return Object(m.a)(t,e),Object(u.a)(t,[{key:"getColorNames",value:function(e){return ue.map((function(t){console.log(t);var a=t.color;return null==a?null:t.type&e?r.a.createElement(re.a,{key:t.type,className:"mx-2",style:{backgroundColor:a}},t.name):void 0}))}},{key:"render",value:function(){return null===this.state.event?r.a.createElement("div",null):r.a.createElement("div",{className:"m-4"},r.a.createElement(se.a,null,r.a.createElement(ce.a,{lg:"12",xl:"6"},r.a.createElement(ie.a,{body:!0},r.a.createElement("h3",null,this.state.event.name),r.a.createElement("h5",null,new Date(this.state.event.start_time).toLocaleDateString()," @ ",new Date(this.state.event.start_time).toLocaleTimeString()),r.a.createElement("p",null," Type: ",this.getColorNames(this.state.event.type)," "),r.a.createElement(le.a,{href:"/events/"+this.props.match.params.id},"See Event"),r.a.createElement("br",null),r.a.createElement("div",{dangerouslySetInnerHTML:{__html:this.state.event.description}})))))}}]),t}(n.Component),de=function(e){function t(){return Object(o.a)(this,t),Object(h.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(m.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){return r.a.createElement(p.a,null,r.a.createElement("div",null,r.a.createElement(v.Helmet,null,r.a.createElement("meta",{charset:"utf-8"}),r.a.createElement("meta",{name:"viewport",content:"width=device-width, initial-scale=1, shrink-to-fit=no, user-scalable=yes"}),r.a.createElement("meta",{name:"theme-color",content:"#5f63d4"}),r.a.createElement("link",{href:"https://fonts.googleapis.com/css?family=Fredoka+One|Nunito:300,400,600,700",rel:"stylesheet"}),r.a.createElement("title",null,"Dormspam")),r.a.createElement(g.a,null,r.a.createElement(me,{exact:!0,path:"/",component:W}),r.a.createElement(me,{exact:!0,path:"/event/:id",component:R}),r.a.createElement(me,{exact:!0,path:"/approve/:id",component:he}),r.a.createElement(me,{exact:!0,path:"/login",component:V}),r.a.createElement(me,{exact:!0,path:"/settings",component:G,authenticated:!0}),r.a.createElement(me,{exact:!0,path:"/admin",component:ne,authenticated:!0}),r.a.createElement(me,{exact:!0,path:"/verify",component:z}))))}}]),t}(n.Component),me=function(e){var t=e.component,a=Object(l.a)(e,["component"]);return!0!==a.authenticated||y()?r.a.createElement(f.a,Object.assign({},a,{render:function(e){return r.a.createElement(t,e)}})):r.a.createElement(V,null)},ve=de;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(ve,null),document.getElementById("root")),i.a.initialize("UA-134713779-1"),i.a.pageview(window.location.pathname+window.location.search),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[38,1,2]]]);
//# sourceMappingURL=main.02e5878c.chunk.js.map